package com.theagilemonkeys.labs.model

import com.amazonaws.services.dynamodbv2.datamodeling.DynamoDBAutoGenerateStrategy
import com.amazonaws.services.dynamodbv2.datamodeling.DynamoDBAutoGeneratedTimestamp
import com.amazonaws.services.dynamodbv2.datamodeling.DynamoDBHashKey
import com.amazonaws.services.dynamodbv2.datamodeling.DynamoDBTable
import java.util.*

@DynamoDBTable(tableName = "PRODUCTS_TABLE_NAME")
class Product(
        @DynamoDBHashKey(attributeName = "sku")
        var sku: String,
        var name: String,
        var description: String? = null,
        @DynamoDBAutoGeneratedTimestamp(strategy = DynamoDBAutoGenerateStrategy.CREATE)
        var createdAt: Date? = null,
        @DynamoDBAutoGeneratedTimestamp(strategy = DynamoDBAutoGenerateStrategy.ALWAYS)
        var updatedAt: Date? = null) {
    constructor(): this("", "", null, null, null)
    companion object {
        val PRODUCTS_TABLE_NAME = System.getenv("PRODUCTS_TABLE_NAME")
        const val SKU_FIELD = "sku"
        const val NAME_FIELD = "name"
        const val DESCRIPTION_FIELD = "description"
    }
}